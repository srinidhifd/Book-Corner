import{r as s,u as v,b as j,a as N,j as t,S as k}from"./index-CsDvAMqL.js";import{B as Y}from"./BackButton-7X_LJNwy.js";import{a as b}from"./index-Bb4oVaqA.js";const $=()=>{const[o,u]=s.useState(""),[i,c]=s.useState(""),[l,h]=s.useState(""),[m,r]=s.useState(!1),[a,x]=s.useState({}),p=v(),{id:d}=j(),{enqueueSnackbar:n}=N();s.useEffect(()=>{r(!0),b.get(`http://localhost:5555/books/${d}`).then(e=>{u(e.data.title),c(e.data.author),h(e.data.publishYear),r(!1)}).catch(e=>{r(!1),n("Failed to fetch book details.",{variant:"error"}),console.error(e)})},[d]);const g=()=>{const e={};return(!o||!/^[\w\s\-.,!?]+$/.test(o))&&(e.title="Title must be alphanumeric and may include special characters."),(!i||!/^[a-zA-Z\s.]+$/.test(i))&&(e.author="Author name should contain only alphabets, spaces, or dots."),(!l||!/^\d{4}$/.test(l)||parseInt(l)>new Date().getFullYear())&&(e.publishYear="Enter a valid publish year in YYYY format (up to the current year)."),x(e),Object.keys(e).length===0},f=()=>{if(!g()){n("Please fix validation errors before saving.",{variant:"error"});return}const e={title:o,author:i,publishYear:l};r(!0),b.put(`http://localhost:5555/books/${d}`,e).then(()=>{r(!1),n("Book updated successfully",{variant:"success"}),p("/")}).catch(y=>{r(!1),n("An error occurred while updating the book.",{variant:"error"}),console.error(y)})};return t.jsxs("div",{className:"flex flex-col items-center p-6 bg-gray-100 min-h-screen",children:[m&&t.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-700 bg-opacity-50 z-50",children:t.jsx(k,{})}),t.jsx(Y,{}),t.jsx("h1",{className:"text-3xl font-bold text-gray-800 my-6",children:"Edit Book"}),t.jsxs("div",{className:"w-full max-w-md bg-white shadow-lg rounded-lg p-6 border border-gray-200",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"title",className:"block text-gray-600 text-lg font-medium mb-2",children:"Title"}),t.jsx("input",{id:"title",type:"text",value:o,onChange:e=>u(e.target.value),className:`w-full border px-4 py-2 rounded-md ${a.title?"border-red-500":"border-gray-300"}`,placeholder:"Enter book title"}),a.title&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.title})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"author",className:"block text-gray-600 text-lg font-medium mb-2",children:"Author"}),t.jsx("input",{id:"author",type:"text",value:i,onChange:e=>c(e.target.value),className:`w-full border px-4 py-2 rounded-md ${a.author?"border-red-500":"border-gray-300"}`,placeholder:"Enter author's name"}),a.author&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.author})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{htmlFor:"publishYear",className:"block text-gray-600 text-lg font-medium mb-2",children:"Publish Year"}),t.jsx("input",{id:"publishYear",type:"number",value:l,onChange:e=>h(e.target.value),className:`w-full border px-4 py-2 rounded-md ${a.publishYear?"border-red-500":"border-gray-300"}`,placeholder:"Enter publish year"}),a.publishYear&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.publishYear})]}),t.jsx("button",{onClick:f,className:"w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700 transition duration-300",disabled:m,children:"Save Changes"})]})]})};export{$ as default};
