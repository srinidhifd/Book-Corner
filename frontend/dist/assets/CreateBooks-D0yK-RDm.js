import{r as s,u as f,a as y,j as e,S as v}from"./index-CsDvAMqL.js";import{B as j}from"./BackButton-7X_LJNwy.js";import{a as N}from"./index-Bb4oVaqA.js";const S=()=>{const[l,c]=s.useState(""),[o,u]=s.useState(""),[r,m]=s.useState(""),[d,n]=s.useState(!1),[a,h]=s.useState({}),b=f(),{enqueueSnackbar:i}=y(),x=()=>{const t={};return(!l||!/^[\w\s\-.,!?]+$/.test(l))&&(t.title="Title must be alphanumeric and may include special characters."),(!o||!/^[a-zA-Z\s.]+$/.test(o))&&(t.author="Author name should contain only alphabets, spaces, or dots."),(!r||!/^\d{4}$/.test(r)||parseInt(r)>new Date().getFullYear())&&(t.publishYear="Enter a valid publish year in YYYY format (up to the current year)."),h(t),Object.keys(t).length===0},p=()=>{if(!x()){i("Please fix validation errors before saving.",{variant:"error"});return}const t={title:l,author:o,publishYear:r};n(!0),N.post("http://localhost:5555/books",t).then(()=>{n(!1),i("Book created successfully",{variant:"success"}),b("/")}).catch(g=>{n(!1),i("An error occurred. Please try again.",{variant:"error"}),console.log(g)})};return e.jsxs("div",{className:"flex flex-col items-center p-6 bg-gray-100 min-h-screen",children:[d&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-700 bg-opacity-50 z-50",children:e.jsx(v,{})}),e.jsx(j,{}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 my-6",children:"Add Book"}),e.jsxs("div",{className:"w-full max-w-md bg-white shadow-lg rounded-lg p-6 border border-gray-200",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-gray-600 text-lg font-medium mb-2",children:"Title"}),e.jsx("input",{id:"title",type:"text",value:l,onChange:t=>c(t.target.value),className:`w-full border px-4 py-2 rounded-md ${a.title?"border-red-500":"border-gray-300"}`,placeholder:"Enter book title"}),a.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.title})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"author",className:"block text-gray-600 text-lg font-medium mb-2",children:"Author"}),e.jsx("input",{id:"author",type:"text",value:o,onChange:t=>u(t.target.value),className:`w-full border px-4 py-2 rounded-md ${a.author?"border-red-500":"border-gray-300"}`,placeholder:"Enter author's name"}),a.author&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.author})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"publishYear",className:"block text-gray-600 text-lg font-medium mb-2",children:"Publish Year"}),e.jsx("input",{id:"publishYear",type:"number",value:r,onChange:t=>m(t.target.value),className:`w-full border px-4 py-2 rounded-md ${a.publishYear?"border-red-500":"border-gray-300"}`,placeholder:"Enter publish year"}),a.publishYear&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.publishYear})]}),e.jsx("button",{onClick:p,className:"w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700 transition duration-300",disabled:d,children:"Save Book"})]})]})};export{S as default};
