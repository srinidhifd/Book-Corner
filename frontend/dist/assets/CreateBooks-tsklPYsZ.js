import{r as s,u as f,a as y,j as e,S as v}from"./index-CkbSKsks.js";import{B as j}from"./BackButton-Ba15svby.js";import{a as N}from"./index-0qfXiD_Z.js";const S=()=>{const[l,u]=s.useState(""),[o,c]=s.useState(""),[a,h]=s.useState(""),[d,i]=s.useState(!1),[r,m]=s.useState({}),b=f(),{enqueueSnackbar:n}=y(),x=()=>{const t={};return l?/^[\w\s\-.,!?]+$/.test(l)||(t.title="Title must be alphanumeric and may include special characters."):t.title="Title is required.",o?/^[a-zA-Z\s.]+$/.test(o)||(t.author="Author name should contain only alphabets, spaces, or dots."):t.author="Author name is required.",a?(!/^\d{4}$/.test(a)||parseInt(a)>new Date().getFullYear())&&(t.publishYear="Enter a valid publish year in YYYY format (up to the current year)."):t.publishYear="Publish year is required.",m(t),Object.keys(t).length===0},p=()=>{if(!x()){n("Please fix validation errors before saving.",{variant:"error"});return}const t={title:l,author:o,publishYear:a};i(!0),N.post("http://localhost:5555/books",t).then(()=>{i(!1),n("Book created successfully",{variant:"success"}),b("/")}).catch(g=>{i(!1),n("An error occurred. Please try again.",{variant:"error"}),console.log(g)})};return e.jsxs("div",{className:"flex flex-col items-center p-6 bg-gray-100 min-h-screen",children:[d&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-700 bg-opacity-50 z-50",children:e.jsx(v,{})}),e.jsx(j,{}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 my-6",children:"Add Book"}),e.jsxs("div",{className:"w-full max-w-md bg-white shadow-lg rounded-lg p-6 border border-gray-200",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-gray-600 text-lg font-medium mb-2",children:"Title"}),e.jsx("input",{id:"title",type:"text",value:l,onChange:t=>u(t.target.value),className:`w-full border px-4 py-2 rounded-md ${r.title?"border-red-500":"border-gray-300"}`,placeholder:"Enter book title"}),r.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.title})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"author",className:"block text-gray-600 text-lg font-medium mb-2",children:"Author"}),e.jsx("input",{id:"author",type:"text",value:o,onChange:t=>c(t.target.value),className:`w-full border px-4 py-2 rounded-md ${r.author?"border-red-500":"border-gray-300"}`,placeholder:"Enter author's name"}),r.author&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.author})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"publishYear",className:"block text-gray-600 text-lg font-medium mb-2",children:"Publish Year"}),e.jsx("input",{id:"publishYear",type:"number",value:a,onChange:t=>h(t.target.value),className:`w-full border px-4 py-2 rounded-md ${r.publishYear?"border-red-500":"border-gray-300"}`,placeholder:"Enter publish year"}),r.publishYear&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.publishYear})]}),e.jsx("button",{onClick:p,className:"w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700 transition duration-300",disabled:d,children:"Save Book"})]})]})};export{S as default};
